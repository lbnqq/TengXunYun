# AI_Pytest7 é¡¹ç›®çŠ¶æ€æŠ¥å‘Š

## é¡¹ç›®æ¦‚è¿°
è¿™æ˜¯ä¸€ä¸ªåŸºäºFlaskçš„AIæ–‡æ¡£å¤„ç†é¡¹ç›®ï¼Œé›†æˆäº†OCRã€å¸ƒå±€åˆ†æå’Œè¡¨æ ¼è§£æåŠŸèƒ½ã€‚

## è§£å†³çš„é—®é¢˜
1. âœ… **Pythonè™šæ‹Ÿç¯å¢ƒé…ç½®** - è™šæ‹Ÿç¯å¢ƒå·²æ­£ç¡®é…ç½®åœ¨ `venv_ci_test` ç›®å½•
2. âœ… **ä¾èµ–å®‰è£…** - æ‰€æœ‰å¿…éœ€çš„ä¾èµ–åŒ…å·²æˆåŠŸå®‰è£…
3. âœ… **ç¼ºå¤±ä¾èµ–** - è¡¥å……å®‰è£…äº† `layoutparser` ç­‰å…³é”®ä¾èµ–
4. âœ… **pytesté…ç½®** - pytestæµ‹è¯•æ¡†æ¶å·²æ­£ç¡®é…ç½®å¹¶å¯æ­£å¸¸è¿è¡Œ
5. âœ… **å¯¼å…¥é—®é¢˜** - æ‰€æœ‰æ ¸å¿ƒæ¨¡å—å¯¼å…¥æµ‹è¯•é€šè¿‡
6. âœ… **Flaskåº”ç”¨** - Webåº”ç”¨å¯ä»¥æ­£å¸¸å¯åŠ¨å’Œè¿è¡Œ

## å½“å‰çŠ¶æ€

### âœ… å·²è§£å†³çš„é—®é¢˜
- Python 3.12.7 ç¯å¢ƒæ­£å¸¸è¿è¡Œ
- æ‰€æœ‰ä¾èµ–åŒ…å®‰è£…å®Œæˆï¼ˆ146ä¸ªåŒ…ï¼‰
- pytest 8.4.1 æµ‹è¯•æ¡†æ¶é…ç½®å®Œæˆ
- Flask Webåº”ç”¨å¯ä»¥æ­£å¸¸å¯åŠ¨
- æ ¸å¿ƒæ¨¡å—ï¼ˆOCRã€å¸ƒå±€åˆ†æã€æ–‡æ¡£å¤„ç†ï¼‰å¯¼å…¥æˆåŠŸ
- åŸºç¡€æµ‹è¯•å¥—ä»¶è¿è¡Œé€šè¿‡ï¼ˆ12ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼‰

### ğŸ“ é¡¹ç›®ç»“æ„
```
aiDoc/
â”œâ”€â”€ src/                    # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ core/              # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ llm_clients/       # LLMå®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ main.py            # ä¸»ç¨‹åºå…¥å£
â”‚   â”œâ”€â”€ web_app.py         # Flask Webåº”ç”¨
â”‚   â”œâ”€â”€ doc_processor.py   # æ–‡æ¡£å¤„ç†å™¨
â”‚   â”œâ”€â”€ ocr_engine.py      # OCRå¼•æ“
â”‚   â””â”€â”€ utils.py           # å·¥å…·å‡½æ•°
â”œâ”€â”€ tests/                 # æµ‹è¯•ç›®å½•
â”‚   â”œâ”€â”€ test_basic.py      # åŸºç¡€åŠŸèƒ½æµ‹è¯•
â”‚   â””â”€â”€ test_web_app.py    # Webåº”ç”¨æµ‹è¯•
â”œâ”€â”€ config/                # é…ç½®æ–‡ä»¶
â”œâ”€â”€ templates/             # HTMLæ¨¡æ¿
â”œâ”€â”€ static/                # é™æ€èµ„æº
â”œâ”€â”€ data/                  # æ•°æ®ç›®å½•
â”œâ”€â”€ models/                # æ¨¡å‹æ–‡ä»¶ç›®å½•
â”œâ”€â”€ venv_ci_test/          # Pythonè™šæ‹Ÿç¯å¢ƒ
â””â”€â”€ requirements.txt       # ä¾èµ–åˆ—è¡¨
```

### ğŸ§ª æµ‹è¯•ç»“æœ
- **æ€»æµ‹è¯•æ•°**: 12ä¸ª
- **é€šè¿‡**: 12ä¸ª âœ…
- **å¤±è´¥**: 0ä¸ª
- **è­¦å‘Š**: 2ä¸ªï¼ˆpytestæ ‡è®°ç›¸å…³ï¼Œä¸å½±å“åŠŸèƒ½ï¼‰

## å¦‚ä½•ä½¿ç”¨

### 1. æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
```powershell
# Windows PowerShell
cd aiDoc
.\venv_ci_test\Scripts\python.exe

# æˆ–è€…å¦‚æœæ‰§è¡Œç­–ç•¥å…è®¸
.\venv_ci_test\Scripts\activate
```

### 2. è¿è¡Œæµ‹è¯•
```powershell
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
.\venv_ci_test\Scripts\python.exe -m pytest tests/ -v

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
.\venv_ci_test\Scripts\python.exe -m pytest tests/test_basic.py -v

# è¿è¡Œå¸¦è¦†ç›–ç‡çš„æµ‹è¯•
.\venv_ci_test\Scripts\python.exe -m pytest tests/ --cov=src --cov-report=html
```

### 3. å¯åŠ¨Webåº”ç”¨
```powershell
# ä½¿ç”¨å¯åŠ¨è„šæœ¬
.\venv_ci_test\Scripts\python.exe run_app.py

# æˆ–ç›´æ¥è¿è¡Œwebåº”ç”¨
cd src
..\venv_ci_test\Scripts\python.exe web_app.py
```

### 4. æµ‹è¯•å¯¼å…¥åŠŸèƒ½
```powershell
# æµ‹è¯•æ‰€æœ‰å¯¼å…¥
cd src
..\venv_ci_test\Scripts\python.exe test_imports.py

# æµ‹è¯•åº”ç”¨å¯åŠ¨
cd ..
.\venv_ci_test\Scripts\python.exe test_app_startup.py
```

## æŠ€æœ¯æ ˆ
- **Python**: 3.12.7
- **Webæ¡†æ¶**: Flask 3.1.1
- **æµ‹è¯•æ¡†æ¶**: pytest 8.4.1
- **OCRå¼•æ“**: PaddleOCR 3.0.3
- **å¸ƒå±€åˆ†æ**: layoutparser 0.3.4
- **æœºå™¨å­¦ä¹ **: torch 2.7.1, transformers 4.53.0
- **æ•°æ®å¤„ç†**: pandas 2.3.0, numpy 2.2.6

## ä¸‹ä¸€æ­¥å»ºè®®
1. ğŸ”§ **å®Œå–„æµ‹è¯•è¦†ç›–ç‡** - æ·»åŠ æ›´å¤šå•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
2. ğŸš€ **éƒ¨ç½²é…ç½®** - é…ç½®ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
3. ğŸ“ **APIæ–‡æ¡£** - å®Œå–„APIæ¥å£æ–‡æ¡£
4. ğŸ”’ **å®‰å…¨åŠ å›º** - æ·»åŠ èº«ä»½éªŒè¯å’Œæˆæƒ
5. ğŸ“Š **ç›‘æ§æ—¥å¿—** - æ·»åŠ åº”ç”¨ç›‘æ§å’Œæ—¥å¿—ç³»ç»Ÿ

## è”ç³»ä¿¡æ¯
- é¡¹ç›®è·¯å¾„: `f:\Tools2\AI_Pytest7\aiDoc`
- Pythonç‰ˆæœ¬: 3.12.7
- è™šæ‹Ÿç¯å¢ƒ: `venv_ci_test`
- é…ç½®æ–‡ä»¶: `pytest.ini`, `config/config.yaml`
