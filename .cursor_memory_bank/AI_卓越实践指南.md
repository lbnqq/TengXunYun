# AI编程项目卓越实践指南（Memory Bank）

本文件收录了本项目的AI协作与工程纪律核心原则、强制执行标准、最佳实践、架构理念等内容，供AI与团队成员在开发、测试、文档、代码生成等环节随时检索和参考。

---

## Ⅰ. 核心指导原则（P0/P1）


### P0: 绝对禁止与强制红线

- 反冗余与工程纯粹性：禁止冗余功能、桩子/空函数、桩子/空类、非生产代码。所有测试基于真实接口。
- 禁止可变全局变量状态共享：禁止用可变全局变量跨进程/脚本/模块共享状态，必须用显式传递、外部存储或专门机制。
- 未经确认不生成：AI在信息不完整、歧义或未确认时拒绝生成代码/文档。
- 有效沟通与上下文管理：每次交互聚焦单一问题，主动管理上下文长度。


### P1: 必须遵守的基石

- Mock与依赖隔离：Mock仅限外部依赖，禁止Mock核心业务逻辑。
- 显式状态管理与传递：所有共享/持久化数据必须显式传递或外部存储。
- 资源管理模式：单例/工厂/依赖注入用于单实例资源管理，禁止裸露全局变量。
- 模块导入与全局变量访问规范：禁止from module import mutable_global_variable，必须通过模块属性访问。
- 唯一数据源与契约管理：常量、状态码、接口Schema等必须唯一定义并集中管理，所有引用方禁止硬编码。
- CI/CD与回归测试强制：每次自动生成或更新代码后，必须自动触发全量回归测试，测试不通过阻断合并/部署。

---

## Ⅱ. 项目工程与AI协作实践

- 需求工程：AI辅助结构化需求、生成测试用例、验收标准、NFRs、架构建议。
- API优先：OpenAPI/Swagger定义API，后端服务代码与契约强绑定。
- 前端设计：UI组件代码与后端API真实对齐。
- 测试与CI/CD：自动化测试、依赖健康检查、契约校验、数据隔离。
- 部署与监控：自动生成监控指标、告警规则、根因分析建议。
- 代码审查：自动检测桩子/空函数、全局变量滥用、Mock核心逻辑等反模式。

---

## Ⅲ. 工程基础设施与唯一数据源

- 统一目录结构、路径约定、环境管理（虚拟环境）。
- 真实接口对齐、服务依赖检测。
- Cursor Rules与Memory Bank自动注入AI行为规则。
- CI/CD与人工Review协同，强制回归测试与契约校验。
- 常量/状态码/Schema唯一数据源，禁止多处硬编码。
- 自动化生成统一入口（Makefile/build.py/generate.sh）。

---

## Ⅳ. AI交互与提示词范例

- 需求工程、API设计、前端生成、测试用例、监控指标、代码审查等场景的高质量Prompt设计要点。
- 强调自证、透明、可审查性，AI需解释推理过程、指出不确定性、提供多方案。

---

## 结论

本指南为AI驱动开发提供强制标准和知识基座，确保工程纯粹性、唯一数据源、协作透明度和高质量交付。所有团队成员和AI工具必须严格遵守。
