# 🤖 智能填报模块使用说明

## 📋 功能概述

智能填报模块集成了星火X1大模型，提供以下核心功能：

1. **年度总结生成** - 基于工作内容自动生成专业的年度工作总结
2. **简历填报** - 根据个人信息智能生成格式化简历
3. **文件下载** - 支持生成的Word文档自动下载

## 🚀 快速开始

### 1. 启动Web服务

```bash
cd aiDoc
.\venv_ci_test\Scripts\python.exe run_app.py
```

### 2. 访问演示页面

打开浏览器访问：http://localhost:5000/smart-fill-demo

### 3. 使用API接口

#### 状态检查
```bash
GET http://localhost:5000/api/smart-fill/status
```

#### 生成年度总结
```bash
POST http://localhost:5000/api/smart-fill/generate-summary
Content-Type: application/json

{
    "content": "今年我主要负责了公司核心产品的技术升级工作...",
    "api_password": "NJFASGuFsRYYjeyLpZFk:jhjQJHHgIeoKVzbAORPh"
}
```

#### 生成简历
```bash
POST http://localhost:5000/api/smart-fill/generate-resume
Content-Type: application/json

{
    "content": "张三，联系电话：138xxxx8888，邮箱：zhangsan@email.com...",
    "api_password": "NJFASGuFsRYYjeyLpZFk:jhjQJHHgIeoKVzbAORPh"
}
```

#### 下载文件
```bash
GET http://localhost:5000/api/smart-fill/download/<filename>
```

## 🔧 API详细说明

### 1. 状态检查 API

**端点**: `GET /api/smart-fill/status`

**响应示例**:
```json
{
    "success": true,
    "data": {
        "spark_x1_available": true,
        "supported_functions": ["generate_summary", "generate_resume"],
        "version": "1.0.0",
        "api_connection": "connected",
        "timestamp": "2025-07-08T10:30:00"
    }
}
```

### 2. 年度总结生成 API

**端点**: `POST /api/smart-fill/generate-summary`

**请求参数**:
- `content` (string, 必需): 工作内容描述
- `api_password` (string, 可选): 星火X1 API密码

**响应示例**:
```json
{
    "success": true,
    "message": "年度总结生成成功",
    "data": {
        "content": "生成的年度总结内容...",
        "filename": "年度工作总结_20250708_103000.docx",
        "file_path": "/tmp/年度工作总结_20250708_103000.docx",
        "usage": {
            "total_tokens": 1250,
            "prompt_tokens": 200,
            "completion_tokens": 1050
        }
    }
}
```

### 3. 简历生成 API

**端点**: `POST /api/smart-fill/generate-resume`

**请求参数**:
- `content` (string, 必需): 个人信息描述
- `api_password` (string, 可选): 星火X1 API密码

**响应示例**:
```json
{
    "success": true,
    "message": "简历生成成功",
    "data": {
        "resume_data": {
            "姓名": "张三",
            "电话": "138xxxx8888",
            "邮箱": "zhangsan@email.com",
            "个人陈述": "...",
            "教育背景": [...],
            "工作经验": [...],
            "项目经验": [...],
            "专业技能": "..."
        },
        "filename": "个人简历_张三_20250708_103000.docx",
        "file_path": "/tmp/个人简历_张三_20250708_103000.docx",
        "usage": {
            "total_tokens": 1800,
            "prompt_tokens": 500,
            "completion_tokens": 1300
        }
    }
}
```

### 4. 文件下载 API

**端点**: `GET /api/smart-fill/download/<filename>`

**说明**: 下载生成的Word文档文件

## 📝 输入内容格式建议

### 年度总结输入示例

```text
今年我主要负责了公司核心产品的技术升级工作，成功完成了从单体架构到微服务架构的转型。
在项目管理方面，我带领5人团队完成了3个重要项目，项目按时交付率达到100%。
技术方面，我深入学习了云原生技术，包括Docker、Kubernetes等。
遇到的主要挑战是系统迁移过程中的数据一致性问题，通过设计分布式事务方案得到解决。
明年计划继续深化在AI和大数据方向的技术能力。
```

### 简历输入示例

```text
张三，联系电话：138xxxx8888，邮箱：zhangsan@email.com

教育背景：
2018-2022年就读于北京大学计算机科学与技术专业，获得学士学位

工作经验：
2022年7月至今在腾讯科技有限公司担任软件工程师
主要负责微信支付系统的后端开发和维护
使用Java、Spring Boot、MySQL、Redis等技术栈

项目经验：
支付风控系统（2023.3-2023.8）
担任核心开发工程师，负责实时风险识别模块
技术栈：Java、Kafka、Elasticsearch
实现毫秒级风险评估，降低欺诈交易率30%

专业技能：
编程语言：Java、Python、JavaScript
框架：Spring Boot、Django、React
数据库：MySQL、Redis、MongoDB
工具：Git、Docker、Jenkins
```

## 🧪 测试工具

### 1. 运行测试脚本

```bash
cd aiDoc
.\venv_ci_test\Scripts\python.exe test_smart_fill.py
```

### 2. 测试功能

- ✅ 系统状态检查
- ✅ 年度总结生成
- ✅ 简历生成
- ✅ 文件下载
- ✅ API连接测试

## 🔒 配置说明

### 星火X1 API配置

默认使用您提供的API密码：`NJFASGuFsRYYjeyLpZFk:jhjQJHHgIeoKVzbAORPh`

也可以通过环境变量配置：
```bash
export SPARK_X1_API_PASSWORD="NJFASGuFsRYYjeyLpZFk:jhjQJHHgIeoKVzbAORPh"
```

### 文件存储

生成的文件默认存储在系统临时目录，用户可以通过下载API获取文件。

## 📁 项目结构

```
aiDoc/
├── src/
│   ├── llm_clients/
│   │   └── spark_x1_client.py      # 星火X1客户端
│   └── web_app.py                  # Web应用（包含API端点）
├── templates/
│   └── smart_fill_demo.html        # 演示页面
├── test_smart_fill.py              # 测试脚本
└── 智能填报模块使用说明.md         # 本文档
```

## ⚠️ 注意事项

1. **API密钥安全**: 请妥善保管您的星火X1 API密码
2. **网络连接**: 需要稳定的网络连接访问星火X1 API
3. **内容长度**: 建议输入内容控制在合理范围内，避免超时
4. **文件清理**: 生成的临时文件需要定期清理
5. **错误处理**: 建议在生产环境中添加完善的错误处理和重试机制

## 🔧 故障排除

### 常见问题

1. **API密码错误**
   - 检查API密码格式是否为 `AK:SK` 格式
   - 确认API密码是否有效

2. **网络连接失败**
   - 检查网络连接是否正常
   - 确认防火墙设置

3. **文件下载失败**
   - 检查文件是否存在
   - 确认文件路径是否正确

4. **生成内容为空**
   - 检查输入内容是否完整
   - 确认API调用是否成功

### 调试方法

1. 查看Web应用日志
2. 运行测试脚本进行诊断
3. 检查API响应状态码和错误信息

## 📞 技术支持

如果遇到问题，请：

1. 运行测试脚本进行诊断
2. 检查系统状态API
3. 查看详细的错误日志
4. 确认API配置是否正确

---

**版本**: v1.0  
**更新时间**: 2025-07-08  
**支持功能**: 年度总结生成、简历填报、文件下载
