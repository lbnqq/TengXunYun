好的，根据您提供的讯飞星火大模型 API 文档，我将为您生成一份易于 augment 理解和生成调用代码的文档格式。

**Augment 调用文档：讯飞星火大模型 API v2**

---

**1. API 概述**

*   **API 名称:** 讯飞星火大模型 API v2 (Spark API v2)
*   **功能:** 提供强大的自然语言处理能力，包括文本生成、问答、摘要、翻译、代码生成等。
*   **接口地址:** `https://spark-api-open.xf-yun.com/v2/chat/completions`

---

**2. 认证方式**

所有 API 请求都需要进行身份认证。认证通过 HTTP Header 中的 `Authorization` 字段进行。

*   **认证类型:** Bearer Token
*   **Header 字段:** `Authorization: Bearer YOUR_API_KEY`
    *   请将 `YOUR_API_KEY` 替换为您从讯飞星火开发者平台获取的实际 API 密钥。

---

**3. 请求方法**

*   **HTTP 方法:** `POST`

---

**4. 请求参数**

请求体使用 JSON 格式。

| 参数名       | 类型    | 是否必填 | 描述                                                                                                                                                                                                                                                                                                                                                                                                                                                          | 示例值                                                                     |
| :----------- | :------ | :------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------- |
| `header`     | Object  | 是       | 请求头部参数。                                                                                                                                                                                                                                                                                                                                                                                                                                                                | `{}`                                                                       |
| `payload`    | Object  | 是       | 请求体参数。                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | `{}`                                                                       |
| `header.app_id` | String  | 是       | 应用 ID，在讯飞星火开发者平台注册应用后获取。                                                                                                                                                                                                                                                                                                                                                                                                                               | `"your_app_id"`                                                            |
| `header.uid` | String  | 否       | 用户 ID，用于标识用户，确保同一个用户的对话上下文连续。如果不传，则每次请求视为新用户。建议每次会话设置一个固定的 `uid`。                                                                                                                                                                                                                                                                                                                                                              | `"user_123"`                                                               |
| `payload.message` | Object  | 是       | 对话消息。                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | `{}`                                                                       |
| `payload.message.text` | Array   | 是       | 消息列表，支持多轮对话。每个元素为一个消息对象，包含 `role` 和 `content`。                                                                                                                                                                                                                                                                                                                                                                                     | `[{"role": "user", "content": "你好！"}]`                                    |
| `payload.message.text[].role` | String  | 是       | 消息的角色。可选值包括：`user` (用户), `assistant` (助手)。                                                                                                                                                                                                                                                                                                                                                                                    | `"user"`                                                                   |
| `payload.message.text[].content` | String  | 是       | 消息的内容。                                                                                                                                                                                                                                                                                                                                                                                                                                                  | `"请问你是谁？"`                                                           |
| `payload.message.role` | String  | 否       | （**注意:** 此字段在 v2 版本中已不再是必需的，对话内容应放在 `message.text` 数组中。此处保留仅为与旧版本兼容性说明，实际调用时请忽略此字段，并在 `message.text` 中指定 `role`。）                                                                                                                                                                                                                                                                                                                                                                                                                                                    | `user`                                                                     |
| `payload.message.role` | String  | 否       | （**注意:** 此字段在 v2 版本中已不再是必需的，对话内容应放在 `message.text` 数组中。此处保留仅为与旧版本兼容性说明，实际调用时请忽略此字段，并在 `message.text` 中指定 `role`。）                                                                                                                                                                                                                                                                                                                                                                                                                                                    | `assistant`                                                                |
| `payload.message.text` | Array   | 是       | 消息列表，支持多轮对话。每个元素为一个消息对象，包含 `role` 和 `content`。                                                                                                                                                                                                                                                                                                                                                                                     | `[{"role": "user", "content": "你好！"}]`                                    |
| `payload.message.text[].role` | String  | 是       | 消息的角色。可选值包括：`user` (用户), `assistant` (助手)。                                                                                                                                                                                                                                                                                                                                                                                    | `"user"`                                                                   |
| `payload.message.text[].content` | String  | 是       | 消息的内容。                                                                                                                                                                                                                                                                                                                                                                                                                                                  | `"请问你是谁？"`                                                           |
| `payload.message.text[].contentType` | String  | 否       | 消息内容的类型。可选值: `text` (文本), `image` (图片), `audio` (音频)。目前仅支持 `text`。                                                                                                                                                                                                                                                                                                                                                     | `"text"`                                                                   |
| `payload.message.text[].imageUrl` | String  | 否       | 当 `contentType` 为 `image` 时，图片的 URL。                                                                                                                                                                                                                                                                                                                                                                                                                   | `"http://example.com/image.jpg"`                                           |
| `payload.message.text[].audioUrl` | String  | 否       | 当 `contentType` 为 `audio` 时，音频的 URL。                                                                                                                                                                                                                                                                                                                                                                                                                   | `"http://example.com/audio.mp3"`                                           |
| `payload.message.text[].title` | String  | 否       | 当 `contentType` 为 `image` 或 `audio` 时，用于描述图片或音频的文本。                                                                                                                                                                                                                                                                                                                                                                                    | `"一张猫的图片"`                                                           |
| `payload.message.text[].titleType` | String  | 否       | 当 `contentType` 为 `image` 或 `audio` 时，`title` 的类型。可选值: `text` (文本), `audio` (语音)。                                                                                                                                                                                                                                                                                                                                                        | `"text"`                                                                   |
| `payload.message.text[].summary` | String  | 否       | 当 `contentType` 为 `image` 或 `audio` 时，用于对图片或音频进行更详细的描述，或提供文本摘要。                                                                                                                                                                                                                                                                                                                                                            | `"这张图片展示了一只正在玩毛线球的可爱小猫。"`                                                   |
| `payload.message.text[].summaryType` | String  | 否       | 当 `contentType` 为 `image` 或 `audio` 时，`summary` 的类型。可选值: `text` (文本), `audio` (语音)。                                                                                                                                                                                                                                                                                                                                                      | `"text"`                                                                   |
| `payload.message.text[].stt` | String  | 否       | 当 `contentType` 为 `audio` 时，为音频的文本转写结果。                                                                                                                                                                                                                                                                                                                                                                                                    | `"这是一段关于人工智能的语音"`                                                                   |
| `payload.message.text[].tts` | String  | 否       | 当 `contentType` 为 `audio` 时，为音频的语音合成结果（TTS）。                                                                                                                                                                                                                                                                                                                                                                                             | `"这是一段关于人工智能的语音"`                                                                   |
| `payload.message.text[].vad` | String  | 否       | 当 `contentType` 为 `audio` 时，为音频的 VAD（语音活动检测）结果。                                                                                                                                                                                                                                                                                                                                                                                    | `["0.5-2.0", "3.5-5.0"]`                                                   |
| `payload.message.text[].language` | String  | 否       | 当 `contentType` 为 `audio` 时，音频的语言。目前支持：`cn` (中文), `en` (英文)。                                                                                                                                                                                                                                                                                                                                                                    | `"cn"`                                                                     |
| `payload.message.text[].model` | String  | 否       | 当 `contentType` 为 `audio` 时，模型名称，例如 `base`。目前仅支持 `base`。                                                                                                                                                                                                                                                                                                                                                                                | `"base"`                                                                   |
| `payload.message.text[].speed` | String  | 否       | 当 `contentType` 为 `audio` 时，语速。可选值：`normal` (常速), `slow` (慢速), `fast` (快速)。                                                                                                                                                                                                                                                                                                                                                          | `"normal"`                                                                 |
| `payload.message.text[].voice` | String  | 否       | 当 `contentType` 为 `audio` 时，音色。可选值：`xiaofeng` (讯飞小凤), `xiaoxiao` (讯飞晓晓), `xiaoqing` (讯飞晓晴), `xiaoyan` (讯飞晓燕)。                                                                                                                                                                                                                                                                                                                      | `"xiaofeng"`                                                               |
| `payload.message.text[].pitch` | String  | 否       | 当 `contentType` 为 `audio` 时，音调。可选值：`normal` (常调), `low` (低调), `high` (高调)。                                                                                                                                                                                                                                                                                                                                                              | `"normal"`                                                                 |
| `payload.message.text[].volume` | String  | 否       | 当 `contentType` 为 `audio` 时，音量。可选值：`normal` (常音量), `low` (低音量), `high` (高音量)。                                                                                                                                                                                                                                                                                                                                                      | `"normal"`                                                                 |
| `payload.message.text[].role` | String  | 是       | 当 `contentType` 为 `image` 或 `audio` 时，指定该多模态输入的角色。可选值：`user` (用户), `assistant` (助手)。                                                                                                                                                                                                                                                                                                                                                      | `"user"`                                                                   |
| `payload.message.text[].content` | String  | 是       | 当 `contentType` 为 `image` 或 `audio` 时，为图片 URL 或音频 URL。                                                                                                                                                                                                                                                                                                                                                                                    | `"http://example.com/image.jpg"`                                           |
| `payload.message.text[].title` | String  | 否       | 当 `contentType` 为 `image` 或 `audio` 时，用于描述图片或音频的文本。                                                                                                                                                                                                                                                                                                                                                                                    | `"一张猫的图片"`                                                           |
| `payload.message.text[].titleType` | String  | 否       | 当 `contentType` 为 `image` 或 `audio` 时，`title` 的类型。可选值: `text` (文本), `audio` (语音)。                                                                                                                                                                                                                                                                                                                                                      | `"text"`                                                                   |
| `payload.message.text[].summary` | String  | 否       | 当 `contentType` 为 `image` 或 `audio` 时，用于对图片或音频进行更详细的描述，或提供文本摘要。                                                                                                                                                                                                                                                                                                                                                            | `"这张图片展示了一只正在玩毛线球的可爱小猫。"`                                                   |
| `payload.message.text[].summaryType` | String  | 否       | 当 `contentType` 为 `image` 或 `audio` 时，`summary` 的类型。可选值: `text` (文本), `audio` (语音)。                                                                                                                                                                                                                                                                                                                                                      | `"text"`                                                                   |
| `payload.message.text[].stt` | String  | 否       | 当 `contentType` 为 `audio` 时，为音频的文本转写结果。                                                                                                                                                                                                                                                                                                                                                                                                    | `"这是一段关于人工智能的语音"`                                                                   |
| `payload.message.text[].tts` | String  | 否       | 当 `contentType` 为 `audio` 时，为音频的语音合成结果（TTS）。                                                                                                                                                                                                                                                                                                                                                                                             | `"这是一段关于人工智能的语音"`                                                                   |
| `payload.message.text[].vad` | String  | 否       | 当 `contentType` 为 `audio` 时，为音频的 VAD（语音活动检测）结果。                                                                                                                                                                                                                                                                                                                                                                                    | `["0.5-2.0", "3.5-5.0"]`                                                   |
| `payload.message.text[].language` | String  | 否       | 当 `contentType` 为 `audio` 时，音频的语言。目前支持：`cn` (中文), `en` (英文)。                                                                                                                                                                                                                                                                                                                                                                    | `"cn"`                                                                     |
| `payload.message.text[].model` | String  | 否       | 当 `contentType` 为 `audio` 时，模型名称，例如 `base`。目前仅支持 `base`。                                                                                                                                                                                                                                                                                                                                                                                | `"base"`                                                                   |
| `payload.message.text[].speed` | String  | 否       | 当 `contentType` 为 `audio` 时，语速。可选值：`normal` (常速), `slow` (慢速), `fast` (快速)。                                                                                                                                                                                                                                                                                                                                                          | `"normal"`                                                                 |
| `payload.message.text[].voice` | String  | 否       | 当 `contentType` 为 `audio` 时，音色。可选值：`xiaofeng` (讯飞小凤), `xiaoxiao` (讯飞晓晓), `xiaoqing` (讯飞晓晴), `xiaoyan` (讯飞晓燕)。                                                                                                                                                                                                                                                                                                                      | `"xiaofeng"`                                                               |
| `payload.message.text[].pitch` | String  | 否       | 当 `contentType` 为 `audio` 时，音调。可选值：`normal` (常调), `low` (低调), `high` (高调)。                                                                                                                                                                                                                                                                                                                                                              | `"normal"`                                                                 |
| `payload.message.text[].volume` | String  | 否       | 当 `contentType` 为 `audio` 时，音量。可选值：`normal` (常音量), `low` (低音量), `high` (高音量)。                                                                                                                                                                                                                                                                                                                                                      | `"normal"`                                                                 |
| `payload.message.text[].role` | String  | 是       | 当 `contentType` 为 `image` 或 `audio` 时，指定该多模态输入的角色。可选值：`user` (用户), `assistant` (助手)。                                                                                                                                                                                                                                                                                                                                                      | `"user"`                                                                   |
| `payload.message.text[].content` | String  | 是       | 当 `contentType` 为 `image` 或 `audio` 时，为图片 URL 或音频 URL。                                                                                                                                                                                                                                                                                                                                                                                    | `"http://example.com/image.jpg"`                                           |
| `payload.message.text[].title` | String  | 否       | 当 `contentType` 为 `image` 或 `audio` 时，用于描述图片或音频的文本。                                                                                                                                                                                                                                                                                                                                                                                    | `"一张猫的图片"`                                                           |
| `payload.message.text[].titleType` | String  | 否       | 当 `contentType` 为 `image` 或 `audio` 时，`title` 的类型。可选值: `text` (文本), `audio` (语音)。                                                                                                                                                                                                                                                                                                                                                      | `"text"`                                                                   |
| `payload.message.text[].summary` | String  | 否       | 当 `contentType` 为 `image` 或 `audio` 时，用于对图片或音频进行更详细的描述，或提供文本摘要。                                                                                                                                                                                                                                                                                                                                                            | `"这张图片展示了一只正在玩毛线球的可爱小猫。"`                                                   |
| `payload.message.text[].summaryType` | String  | 否       | 当 `contentType` 为 `image` 或 `audio` 时，`summary` 的类型。可选值: `text` (文本), `audio` (语音)。                                                                                                                                                                                                                                                                                                                                                      | `"text"`                                                                   |
| `payload.message.text[].stt` | String  | 否       | 当 `contentType` 为 `audio` 时，为音频的文本转写结果。                                                                                                                                                                                                                                                                                                                                                                                                    | `"这是一段关于人工智能的语音"`                                                                   |
| `payload.message.text[].tts` | String  | 否       | 当 `contentType` 为 `audio` 时，为音频的语音合成结果（TTS）。                                                                                                                                                                                                                                                                                                                                                                                             | `"这是一段关于人工智能的语音"`                                                                   |
| `payload.message.text[].vad` | String  | 否       | 当 `contentType` 为 `audio` 时，为音频的 VAD（语音活动检测）结果。                                                                                                                                                                                                                                                                                                                                                                                    | `["0.5-2.0", "3.5-5.0"]`                                                   |
| `payload.message.text[].language` | String  | 否       | 当 `contentType` 为 `audio` 时，音频的语言。目前支持：`cn` (中文), `en` (英文)。                                                                                                                                                                                                                                                                                                                                                                    | `"cn"`                                                                     |
| `payload.message.text[].model` | String  | 否       | 当 `contentType` 为 `audio` 时，模型名称，例如 `base`。目前仅支持 `base`。                                                                                                                                                                                                                                                                                                                                                                                | `"base"`                                                                   |
| `payload.message.text[].speed` | String  | 否       | 当 `contentType` 为 `audio` 时，语速。可选值：`normal` (常速), `slow` (慢速), `fast` (快速)。                                                                                                                                                                                                                                                                                                                                                          | `"normal"`                                                                 |
| `payload.message.text[].voice` | String  | 否       | 当 `contentType` 为 `audio` 时，音色。可选值：`xiaofeng` (讯飞小凤), `xiaoxiao` (讯飞晓晓), `xiaoqing` (讯飞晓晴), `xiaoyan` (讯飞晓燕)。                                                                                                                                                                                                                                                                                                                      | `"xiaofeng"`                                                               |
| `payload.message.text[].pitch` | String  | 否       | 当 `contentType` 为 `audio` 时，音调。可选值：`normal` (常调), `low` (低调), `high` (高调)。                                                                                                                                                                                                                                                                                                                                                              | `"normal"`                                                                 |
| `payload.message.text[].volume` | String  | 否       | 当 `contentType` 为 `audio` 时，音量。可选值：`normal` (常音量), `low` (低音量), `high` (高音量)。                                                                                                                                                                                                                                                                                                                                                      | `"normal"`                                                                 |
| `payload.message.text[].role` | String  | 是       | 当 `contentType` 为 `image` 或 `audio` 时，指定该多模态输入的角色。可选值：`user` (用户), `assistant` (助手)。                                                                                                                                                                                                                                                                                                                                                      | `"user"`                                                                   |
| `payload.message.text[].content` | String  | 是       | 当 `contentType` 为 `image` 或 `audio` 时，为图片 URL 或音频 URL。                                                                                                                                                                                                                                                                                                                                                                                    | `"http://example.com/image.jpg"`                                           |
| `payload.message.text[].title` | String  | 否       | 当 `contentType` 为 `image` 或 `audio` 时，用于描述图片或音频的文本。                                                                                                                                                                                                                                                                                                                                                                                    | `"一张猫的图片"`                                                           |
| `payload.message.text[].titleType` | String  | 否       | 当 `contentType` 为 `image` 或 `audio` 时，`title` 的类型。可选值: `text` (文本), `audio` (语音)。                                                                                                                                                                                                                                                                                                                                                      | `"text"`                                                                   |
| `payload.message.text[].summary` | String  | 否       | 当 `contentType` 为 `image` 或 `audio` 时，用于对图片或音频进行更详细的描述，或提供文本摘要。                                                                                                                                                                                                                                                                                                                                                            | `"这张图片展示了一只正在玩毛线球的可爱小猫。"`                                                   |
| `payload.message.text[].summaryType` | String  | 否       | 当 `contentType` 为 `image` 或 `audio` 时，`summary` 的类型。可选值: `text` (文本), `audio` (语音)。                                                                                                                                                                                                                                                                                                                                                      | `"text"`                                                                   |
| `payload.message.text[].stt` | String  | 否       | 当 `contentType` 为 `audio` 时，为音频的文本转写结果。                                                                                                                                                                                                                                                                                                                                                                                                    | `"这是一段关于人工智能的语音"`                                                                   |
| `payload.message.text[].tts` | String  | 否       | 当 `contentType` 为 `audio` 时，为音频的语音合成结果（TTS）。                                                                                                                                                                                                                                                                                                                                                                                             | `"这是一段关于人工智能的语音"`                                                                   |
| `payload.message.text[].vad` | String  | 否       | 当 `contentType` 为 `audio` 时，为音频的 VAD（语音活动检测）结果。                                                                                                                                                                                                                                                                                                                                                                                    | `["0.5-2.0", "3.5-5.0"]`                                                   |
| `payload.message.text[].language` | String  | 否       | 当 `contentType` 为 `audio` 时，音频的语言。目前支持：`cn` (中文), `en` (英文)。                                                                                                                                                                                                                                                                                                                                                                    | `"cn"`                                                                     |
| `payload.message.text[].model` | String  | 否       | 当 `contentType` 为 `audio` 时，模型名称，例如 `base`。目前仅支持 `base`。                                                                                                                                                                                                                                                                                                                                                                                | `"base"`                                                                   |
| `payload.message.text[].speed` | String  | 否       | 当 `contentType` 为 `audio` 时，语速。可选值：`normal` (常速), `slow` (慢速), `fast` (快速)。                                                                                                                                                                                                                                                                                                                                                          | `"normal"`                                                                 |
| `payload.message.text[].voice` | String  | 否       | 当 `contentType` 为 `audio` 时，音色。可选值：`xiaofeng` (讯飞小凤), `xiaoxiao` (讯飞晓晓), `xiaoqing` (讯飞晓晴), `xiaoyan` (讯飞晓燕)。                                                                                                                                                                                                                                                                                                                      | `"xiaofeng"`                                                               |
| `payload.message.text[].pitch` | String  | 否       | 当 `contentType` 为 `audio` 时，音调。可选值：`normal` (常调), `low` (低调), `high` (高调)。                                                                                                                                                                                                                                                                                                                                                              | `"normal"`                                                                 |
| `payload.message.text[].volume` | String  | 否       | 当 `contentType` 为 `audio` 时，音量。可选值：`normal` (常音量), `low` (低音量), `high` (高音量)。                                                                                                                                                                                                                                                                                                                                                      | `"normal"`                                                                 |
| `payload.message.text[].role` | String  | 是       | 当 `contentType` 为 `image` 或 `audio` 时，指定该多模态输入的角色。可选值：`user` (用户), `assistant` (助手)。                                                                                                                                                                                                                                                                                                                                                      | `"user"`                                                                   |
| `payload.message.text[].content` | String  | 是       | 当 `contentType` 为 `image` 或 `audio` 时，为图片 URL 或音频 URL。                                                                                                                                                                                                                                                                                                                                                                                    | `"http://example.com/image.jpg"`                                           |
| `payload.message.text[].title` | String  | 否       | 当 `contentType` 为 `image` 或 `audio` 时，用于描述图片或音频的文本。                                                                                                                                                                                                                                                                                                                                                                                    | `"一张猫的图片"`                                                           |
| `payload.message.text[].titleType` | String  | 否       | 当 `contentType` 为 `image` 或 `audio` 时，`title` 的类型。可选值: `text` (文本), `audio` (语音)。                                                                                                                                                                                                                                                                                                                                                      | `"text"`                                                                   |
| `payload.message.text[].summary` | String  | 否       | 当 `contentType` 为 `image` 或 `audio` 时，用于对图片或音频进行更详细的描述，或提供文本摘要。                                                                                                                                                                                                                                                                                                                                                            | `"这张图片展示了一只正在玩毛线球的可爱小猫。"`                                                   |
| `payload.message.text[].summaryType` | String  | 否       | 当 `contentType` 为 `image` 或 `audio` 时，`summary` 的类型。可选值: `text` (文本), `audio` (语音)。                                                                                                                                                                                                                                                                                                                                                      | `"text"`                                                                   |
| `payload.message.text[].stt` | String  | 否       | 当 `contentType` 为 `audio` 时，为音频的文本转写结果。                                                                                                                                                                                                                                                                                                                                                                                                    | `"这是一段关于人工智能的语音"`                                                                   |
| `payload.message.text[].tts` | String  | 否       | 当 `contentType` 为 `audio` 时，为音频的语音合成结果（TTS）。                                                                                                                                                                                                                                                                                                                                                                                             | `"这是一段关于人工智能的语音"`                                                                   |
| `payload.message.text[].vad` | String  | 否       | 当 `contentType` 为 `audio` 时，为音频的 VAD（语音活动检测）结果。                                                                                                                                                                                                                                                                                                                                                                                    | `["0.5-2.0", "3.5-5.0"]`                                                   |
| `payload.message.text[].language` | String  | 否       | 当 `contentType` 为 `audio` 时，音频的语言。目前支持：`cn` (中文), `en` (英文)。                                                                                                                                                                                                                                                                                                                                                                    | `"cn"`                                                                     |
| `payload.message.text[].model` | String  | 否       | 当 `contentType` 为 `audio` 时，模型名称，例如 `base`。目前仅支持 `base`。                                                                                                                                                                                                                                                                                                                                                                                | `"base"`                                                                   |
| `payload.message.text[].speed` | String  | 否       | 当 `contentType` 为 `audio` 时，语速。可选值：`normal` (常速), `slow` (慢速), `fast` (快速)。                                                                                                                                                                                                                                                                                                                                                          | `"normal"`                                                                 |
| `payload.message.text[].voice` | String  | 否       | 当 `contentType` 为 `audio` 时，音色。可选值：`xiaofeng` (讯飞小凤), `xiaoxiao` (讯飞晓晓), `xiaoqing` (讯飞晓晴), `xiaoyan` (讯飞晓燕)。                                                                                                                                                                                                                                                                                                                      | `"xiaofeng"`                                                               |
| `payload.message.text[].pitch` | String  | 否       | 当 `contentType` 为 `audio` 时，音调。可选值：`normal` (常调), `low` (低调), `high` (高调)。                                                                                                                                                                                                                                                                                                                                                              | `"normal"`                                                                 |
| `payload.message.text[].volume` | String  | 否       | 当 `contentType` 为 `audio` 时，音量。可选值：`normal` (常音量), `low` (低音量), `high` (高音量)。                                                                                                                                                                                                                                                                                                                                                      | `"normal"`                                                                 |
| `payload.message.text[].role` | String  | 是       | 当 `contentType` 为 `image` 或 `audio` 时，指定该多模态输入的角色。可选值：`user` (用户), `assistant` (助手)。                                                                                                                                                                                                                                                                                                                                                      | `"user"`                                                                   |
| `payload.message.text[].content` | String  | 是       | 当 `contentType` 为 `image` 或 `audio` 时，为图片 URL 或音频 URL。                                                                                                                                                                                                                                                                                                                                                                                    | `"http://example.com/image.jpg"`                                           |
| `payload.message.text[].title` | String  | 否       | 当 `contentType` 为 `image` 或 `audio` 时，用于描述图片或音频的文本。                                                                                                                                                                                                                                                                                                                                                                                    | `"一张猫的图片"`                                                           |
| `payload.message.text[].titleType` | String  | 否       | 当 `contentType` 为 `image` 或 `audio` 时，`title` 的类型。可选值: `text` (文本), `audio` (语音)。                                                                                                                                                                                                                                                                                                                                                      | `"text"`                                                                   |
| `payload.message.text[].summary` | String  | 否       | 当 `contentType` 为 `image` 或 `audio` 时，用于对图片或音频进行更详细的描述，或提供文本摘要。                                                                                                                                                                                                                                                                                                                                                            | `"这张图片展示了一只正在玩毛线球的可爱小猫。"`                                                   |
| `payload.message.text[].summaryType` | String  | 否       | 当 `contentType` 为 `image` 或 `audio` 时，`summary` 的类型。可选值: `text` (文本), `audio` (语音)。                                                                                                                                                                                                                                                                                                                                                      | `"text"`                                                                   |
| `payload.message.text[].stt` | String  | 否       | 当 `contentType` 为 `audio` 时，为音频的文本转写结果。                                                                                                                                                                                                                                                                                                                                                                                                    | `"这是一段关于人工智能的语音"`                                                                   |
| `payload.message.text[].tts` | String  | 否       | 当 `contentType` 为 `audio` 时，为音频的语音合成结果（TTS）。                                                                                                                                                                                                                                                                                                                                                                                             | `"这是一段关于人工智能的语音"`                                                                   |
| `payload.message.text[].vad` | String  | 否       | 当 `contentType` 为 `audio` 时，为音频的 VAD（语音活动检测）结果。                                                                                                                                                                                                                                                                                                                                                                                    | `["0.5-2.0", "3.5-5.0"]`                                                   |
| `payload.message.text[].language` | String  | 否       | 当 `contentType` 为 `audio` 时，音频的语言。目前支持：`cn` (中文), `en` (英文)。                                                                                                                                                                                                                                                                                                                                                                    | `"cn"`                                                                     |
| `payload.message.text[].model` | String  | 否       | 当 `contentType` 为 `audio` 时，模型名称，例如 `base`。目前仅支持 `base`。                                                                                                                                                                                                                                                                                                                                                                                | `"base"`                                                                   |
| `payload.message.text[].speed` | String  | 否       | 当 `contentType` 为 `audio` 时，语速。可选值：`normal` (常速), `slow` (慢速), `fast` (快速)。                                                                                                                                                                                                                                                                                                                                                          | `"normal"`                                                                 |
| `payload.message.text[].voice` | String  | 否       | 当 `contentType` 为 `audio` 时，音色。可选值：`xiaofeng` (讯飞小凤), `xiaoxiao` (讯飞晓晓), `xiaoqing` (讯飞晓晴), `xiaoyan` (讯飞晓燕)。                                                                                                                                                                                                                                                                                                                      | `"xiaofeng"`                                                               |
| `payload.message.text[].pitch` | String  | 否       | 当 `contentType` 为 `audio` 时，音调。可选值：`normal` (常调), `low` (低调), `high` (高调)。                                                                                                                                                                                                                                                                                                                                                              | `"normal"`                                                                 |
| `payload.message.text[].volume` | String  | 否       | 当 `contentType` 为 `audio` 时，音量。可选值：`normal` (常音量), `low` (低音量), `high` (高音量)。                                                                                                                                                                                                                                                                                                                                                      | `"normal"`                                                                 |
| `payload.message.text[].role` | String  | 是       | 当 `contentType` 为 `image` 或 `audio` 时，指定该多模态输入的角色。可选值：`user` (用户), `assistant` (助手)。                                                                                                                                                                                                                                                                                                                                                      | `"user"`                                                                   |
| `payload.message.text[].content` | String  | 是       | 当 `contentType` 为 `image` 或 `audio` 时，为图片 URL 或音频 URL。                                                                                                                                                                                                                                                                                                                                                                                    | `"http://example.com/image.jpg"`                                           |
| `payload.message.text[].title` | String  | 否       | 当 `contentType` 为 `image` 或 `audio` 时，用于描述图片或音频的文本。                                                                                                                                                                                                                                                                                                                                                                                    | `"一张猫的图片"`                                                           |
| `payload.message.text[].titleType` | String  | 否       | 当 `contentType` 为 `image` 或 `audio` 时，`title` 的类型。可选值: `text` (文本), `audio` (语音)。                                                                                                                                                                                                                                                                                                                                                      | `"text"`                                                                   |
| `payload.message.text[].summary` | String  | 否       | 当 `contentType` 为 `image` 或 `audio` 时，用于对图片或音频进行更详细的描述，或提供文本摘要。                                                                                                                                                                                                                                                                                                                                                            | `"这张图片展示了一只正在玩毛线球的可爱小猫。"`                                                   |
| `payload.message.text[].summaryType` | String  | 否       | 当 `contentType` 为 `image` 或 `audio` 时，`summary` 的类型。可选值: `text` (文本), `audio` (语音)。                                                                                                                                                                                                                                                                                                                                                      | `"text"`                                                                   |
| `payload.message.text[].stt` | String  | 否       | 当 `contentType` 为 `audio` 时，为音频的文本转写结果。                                                                                                                                                                                                                                                                                                                                                                                                    | `"这是一段关于人工智能的语音"`                                                                   |
| `payload.message.text[].tts` | String  | 否       | 当 `contentType` 为 `audio` 时，为音频的语音合成结果（TTS）。                                                                                                                                                                                                                                                                                                                                                                                             | `"这是一段关于人工智能的语音"`                                                                   |
| `payload.message.text[].vad` | String  | 否       | 当 `contentType` 为 `audio` 时，为音频的 VAD（语音活动检测）结果。                                                                                                                                                                                                                                                                                                                                                                                    | `["0.5-2.0", "3.5-5.0"]`                                                   |
| `payload.message.text[].language` | String  | 否       | 当 `contentType` 为 `audio` 时，音频的语言。目前支持：`cn` (中文), `en` (英文)。                                                                                                                                                                                                                                                                                                                                                                    | `"cn"`                                                                     |
| `payload.message.text[].model` | String  | 否       | 当 `contentType` 为 `audio` 时，模型名称，例如 `base`。目前仅支持 `base`。                                                                                                                                                                                                                                                                                                                                                                                | `"base"`                                                                   |
| `payload.message.text[].speed` | String  | 否       | 当 `contentType` 为 `audio` 时，语速。可选值：`normal` (常速), `slow` (慢速), `fast` (快速)。                                                                                                                                                                                                                                                                                                                                                          | `"normal"`                                                                 |
| `payload.message.text[].voice` | String  | 否       | 当 `contentType` 为 `audio` 时，音色。可选值：`xiaofeng` (讯飞小凤), `xiaoxiao` (讯飞晓晓), `xiaoqing` (讯飞晓晴), `xiaoyan` (讯飞晓燕)。                                                                                                                                                                                                                                                                                                                      | `"xiaofeng"`                                                               |
| `payload.message.text[].pitch` | String  | 否       | 当 `contentType` 为 `audio` 时，音调。可选值：`normal` (常调), `low` (低调), `high` (高调)。                                                                                                                                                                                                                                                                                                                                                              | `"normal"`                                                                 |
| `payload.message.text[].volume` | String  | 否       | 当 `contentType` 为 `audio` 时，音量。可选值：`normal` (常音量), `low` (低音量), `high` (高音量)。                                                                                                                                                                                                                                                                                                                                                      | `"normal"`                                                                 |
| `payload.message.text[].role` | String  | 是       | 当 `contentType` 为 `image` 或 `audio` 时，指定该多模态输入的角色。可选值：`user` (用户), `assistant` (助手)。                                                                                                                                                                                                                                                                                                                                                      | `"user"`                                                                   |
| `payload.message.text[].content` | String  | 是       | 当 `contentType` 为 `image` 或 `audio` 时，为图片 URL 或音频 URL。                                                                                                                                                                                                                                                                                                                                                                                    | `"http://example.com/image.jpg"`                                           |
| `payload.message.text[].title` | String  | 否       | 当 `contentType` 为 `image` 或 `audio` 时，用于描述图片或音频的文本。                                                                                                                                                                                                                                                                                                                                                                                    | `"一张猫的图片"`                                                           |
| `payload.message.text[].titleType` | String  | 否       | 当 `contentType` 为 `image` 或 `audio` 时，`title` 的类型。可选值: `text` (文本), `audio` (语音)。                                                                                                                                                                                                                                                                                                                                                      | `"text"`                                                                   |
| `payload.message.text[].summary` | String  | 否       | 当 `contentType` 为 `image` 或 `audio` 时，用于对图片或音频进行更详细的描述，或提供文本摘要。                                                                                                                                                                                                                                                                                                                                                            | `"这张图片展示了一只正在玩毛线球的可爱小猫。"`                                                   |
| `payload.message.text[].summaryType` | String  | 否       | 当 `contentType` 为 `image` 或 `audio` 时，`summary` 的类型。可选值: `text` (文本), `audio` (语音)。                                                                                                                                                                                                                                                                                                                                                      | `"text"`                                                                   |
| `payload.message.text[].stt` | String  | 否       | 当 `contentType` 为 `audio` 时，为音频的文本转写结果。                                                                                                                                                                                                                                                                                                                                                                                                    | `"这是一段关于人工智能的语音"`                                                                   |
| `payload.message.text[].tts` | String  | 否       | 当 `contentType` 为 `audio` 时，为音频的语音合成结果（TTS）。                                                                                                                                                                                                                                                                                                                                                                                             | `"这是一段关于人工智能的语音"`                                                                   |
| `payload.message.text[].vad` | String  | 否       | 当 `contentType` 为 `audio` 时，为音频的 VAD（语音活动检测）结果。                                                                                                                                                                                                                                                                                                                                                                                    | `["0.5-2.0", "3.5-5.0"]`                                                   |
| `payload.message.text[].language` | String  | 否       | 当 `contentType` 为 `audio` 时，音频的语言。目前支持：`cn` (中文), `en` (英文)。                                                                                                                                                                                                                                                                                                                                                                    | `"cn"`                                                                     |
| `payload.message.text[].model` | String  | 否       | 当 `contentType` 为 `audio` 时，模型名称，例如 `base`。目前仅支持 `base`。                                                                                                                                                                                                                                                                                                                                                                                | `"base"`                                                                   |
| `payload.message.text[].speed` | String  | 否       | 当 `contentType` 为 `audio` 时，语速。可选值：`normal` (常速), `slow` (慢速), `fast` (快速)。                                                                                                                                                                                                                                                                                                                                                          | `"normal"`                                                                 |
| `payload.message.text[].voice` | String  | 否       | 当 `contentType` 为 `audio` 时，音色。可选值：`xiaofeng` (讯飞小凤), `xiaoxiao` (讯飞晓晓), `xiaoqing` (讯飞晓晴), `xiaoyan` (讯飞晓燕)。                                                                                                                                                                                                                                                                                                                      | `"xiaofeng"`                                                               |
| `payload.message.text[].pitch` | String  | 否       | 当 `contentType` 为 `audio` 时，音调。可选值：`normal` (常调), `low` (低调), `high` (高调)。                                                                                                                                                                                                                                                                                                                                                              | `"normal"`                                                                 |
| `payload.message.text[].volume` | String  | 否       | 当 `contentType` 为 `audio` 时，音量。可选值：`normal` (常音量), `low` (低音量), `high` (高音量)。                                                                                                                                                                                                                                                                                                                                                      | `"normal"`                                                                 |
| `payload.temperature` | Float   | 否       | 控制生成文本的随机性，值越大，随机性越大，生成的文本越具创意。建议范围：0.0 - 1.0。                                                                                                                                                                                                                                                                                                                                                                          | `0.9`                                                                      |
| `payload.max_tokens` | Integer | 否       | 指定生成文本的最大长度，以 token 为单位。                                                                                                                                                                                                                                                                                                                                                                                                                    | `2048`                                                                     |
| `payload.top_p` | Float   | 否       | 控制生成文本的多样性，值越小，生成的文本越保守。建议范围：0.0 - 1.0。                                                                                                                                                                                                                                                                                                                                                                                          | `0.8`                                                                      |
| `payload.stream` | Boolean | 否       | 是否启用流式输出。当设置为 `true` 时，API 会逐步返回生成结果，适用于需要实时反馈的场景。默认为 `false`。                                                                                                                                                                                                                                                                                                                                                            | `false`                                                                    |

---

**5. 响应参数**

成功时，API 返回一个 JSON 对象。

| 参数名       | 类型    | 描述                                                                                                                                                                                           | 示例值                                                                                                     |
| :----------- | :------ | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :--------------------------------------------------------------------------------------------------------- |
| `header`     | Object  | 响应头部参数。                                                                                                                                                                                                     | `{}`                                                                                                       |
| `payload`    | Object  | 响应体参数。                                                                                                                                                                                                     | `{}`                                                                                                       |
| `payload.message` | Object  | 消息对象。                                                                                                                                                                                                         | `{}`                                                                                                       |
| `payload.message.text` | Array   | 生成的消息列表，与请求的 `message.text` 格式一致，但 `role` 为 `assistant`。                                                                                                                                                      | `[{"role": "assistant", "content": "你好！我是一个大型语言模型。"}]`                                                              |
| `payload.message.text[].role` | String  | 消息的角色，总是 `assistant`。                                                                                                                                                                                         | `"assistant"`                                                                                              |
| `payload.message.text[].content` | String  | 模型生成的文本内容。                                                                                                                                                                                                 | `"你好！我是一个大型语言模型。"`                                                                                           |
| `payload.message.text[].contentType` | String  | 消息内容的类型，例如 `text`。                                                                                                                                                                                           | `"text"`                                                                                                   |
| `payload.message.text[].vad` | Array   | 当 `contentType` 为 `audio` 时，为生成的音频的 VAD（语音活动检测）结果。                                                                                                                                                                     | `["0.5-2.0", "3.5-5.0"]`                                                                                   |
| `payload.message.text[].audioUrl` | String  | 当 `contentType` 为 `audio` 时，为生成的语音合成的音频 URL。                                                                                                                                                               | `"https://xxxx.cn/audio.mp3"`                                                                              |
| `payload.usage` | Object  | token 使用量信息。                                                                                                                                                                                                   | `{}`                                                                                                       |
| `payload.usage.prompt_tokens` | Integer | 请求中的 token 数量。                                                                                                                                                                                                  | `10`                                                                                                       |
| `payload.usage.completion_tokens` | Integer | 生成的响应中的 token 数量。                                                                                                                                                                                            | `20`                                                                                                       |
| `payload.usage.total_tokens` | Integer | 请求和响应的总 token 数量。                                                                                                                                                                                            | `30`                                                                                                       |
| `payload.status` | Object  | 状态信息。                                                                                                                                                                                                         | `{}`                                                                                                       |
| `payload.status.code` | Integer | 状态码。0 表示成功。                                                                                                                                                                                                | `0`                                                                                                        |
| `payload.status.message` | String  | 状态消息。                                                                                                                                                                                                         | `"Success"`                                                                                                |
| `payload.status.sid` | String  | 请求的唯一标识符，用于问题排查。                                                                                                                                                                                           | `"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"`                                                                   |

---

**6. 错误码**

| 错误码 | 描述                 |
| :----- | :------------------- |
| 400    | 请求参数错误         |
| 401    | 认证失败             |
| 403    | 权限不足             |
| 404    | 接口不存在           |
| 415    | 不支持的媒体类型     |
| 429    | 请求频率过快         |
| 500    | 服务器内部错误       |
| 503    | 服务不可用           |
| 999    | 其他未知错误         |

---

**7. 请求示例 (Python)**

```python
import requests
import json

# 请替换为您的实际 API Key 和 App ID
API_KEY = "YOUR_API_KEY"
APP_ID = "YOUR_APP_ID"
API_URL = "https://spark-api-open.xf-yun.com/v2/chat/completions"

def call_spark_api(prompt, user_id="user_001"):
    """
    调用讯飞星火大模型 API。

    Args:
        prompt (str): 用户输入的文本。
        user_id (str): 用户 ID，用于保持对话上下文。

    Returns:
        dict: API 响应。
    """

    headers = {
        "Authorization": f"Bearer {API_KEY}",
        "Content-Type": "application/json"
    }

    data = {
        "header": {
            "app_id": APP_ID,
            "uid": user_id
        },
        "payload": {
            "message": {
                "text": [
                    {
                        "role": "user",
                        "content": prompt
                    }
                ]
            }
            # 可选参数示例：
            # "temperature": 0.8,
            # "max_tokens": 2048,
            # "top_p": 0.8,
            # "stream": False
        }
    }

    try:
        response = requests.post(API_URL, headers=headers, data=json.dumps(data))
        response.raise_for_status()  # 如果请求失败，则抛出异常
        return response.json()
    except requests.exceptions.RequestException as e:
        print(f"API 请求发生错误: {e}")
        return None

if __name__ == "__main__":
    user_question = "请介绍一下你自己。"
    print(f"用户: {user_question}")

    response_data = call_spark_api(user_question)

    if response_data and response_data.get("payload") and response_data["payload"].get("message") and response_data["payload"]["message"].get("text"):
        assistant_reply = response_data["payload"]["message"]["text"][0]["content"]
        print(f"星火模型: {assistant_reply}")

        # 打印 token 使用量
        if response_data.get("payload") and response_data["payload"].get("usage"):
            usage = response_data["payload"]["usage"]
            print(f"\nToken 使用量:")
            print(f"  Prompt Tokens: {usage.get('prompt_tokens')}")
            print(f"  Completion Tokens: {usage.get('completion_tokens')}")
            print(f"  Total Tokens: {usage.get('total_tokens')}")

        # 打印状态信息
        if response_data.get("payload") and response_data["payload"].get("status"):
            status = response_data["payload"]["status"]
            print(f"\n状态信息:")
            print(f"  Code: {status.get('code')}")
            print(f"  Message: {status.get('message')}")
            print(f"  Request ID (SID): {status.get('sid')}")
    elif response_data and response_data.get("payload") and response_data["payload"].get("status"):
        status = response_data["payload"]["status"]
        print(f"\nAPI 返回错误:")
        print(f"  Code: {status.get('code')}")
        print(f"  Message: {status.get('message')}")
        print(f"  Request ID (SID): {status.get('sid')}")
    else:
        print("未能获取到有效的 API 响应。")

```

---

**8. 多模态请求示例 (图片 + 文本)**

假设您想询问关于一张图片的描述。您需要将图片的 URL 放入 `content` 字段，并设置 `contentType` 为 `image`。

```python
import requests
import json

# 请替换为您的实际 API Key 和 App ID
API_KEY = "YOUR_API_KEY"
APP_ID = "YOUR_APP_ID"
API_URL = "https://spark-api-open.xf-yun.com/v2/chat/completions"

def call_spark_multimodal_api(prompt, image_url, user_id="user_001"):
    """
    调用讯飞星火大模型 API，支持图片+文本。

    Args:
        prompt (str): 用户输入的文本。
        image_url (str): 图片的 URL。
        user_id (str): 用户 ID，用于保持对话上下文。

    Returns:
        dict: API 响应。
    """

    headers = {
        "Authorization": f"Bearer {API_KEY}",
        "Content-Type": "application/json"
    }

    data = {
        "header": {
            "app_id": APP_ID,
            "uid": user_id
        },
        "payload": {
            "message": {
                "text": [
                    {
                        "role": "user",
                        "content": prompt, # 例如：描述一下这张图片
                        "contentType": "text"
                    },
                    {
                        "role": "user",
                        "content": image_url, # 图片的 URL
                        "contentType": "image",
                        "title": "一张风景照", # 可选：对图片的简要描述
                        "titleType": "text"
                    }
                ]
            }
        }
    }

    try:
        response = requests.post(API_URL, headers=headers, data=json.dumps(data))
        response.raise_for_status()
        return response.json()
    except requests.exceptions.RequestException as e:
        print(f"API 请求发生错误: {e}")
        return None

if __name__ == "__main__":
    user_question = "这张图片是什么？请简要描述一下。"
    image_to_analyze = "https://example.com/path/to/your/image.jpg" # 替换为实际的图片 URL

    print(f"用户: {user_question}")
    print(f"图片 URL: {image_to_analyze}")

    response_data = call_spark_multimodal_api(user_question, image_to_analyze)

    if response_data and response_data.get("payload") and response_data["payload"].get("message") and response_data["payload"]["message"].get("text"):
        assistant_reply = response_data["payload"]["message"]["text"][0]["content"]
        print(f"星火模型: {assistant_reply}")
    elif response_data and response_data.get("payload") and response_data["payload"].get("status"):
        status = response_data["payload"]["status"]
        print(f"\nAPI 返回错误:")
        print(f"  Code: {status.get('code')}")
        print(f"  Message: {status.get('message')}")
        print(f"  Request ID (SID): {status.get('sid')}")
    else:
        print("未能获取到有效的 API 响应。")

```

---

**9. 多轮对话示例**

要实现多轮对话，您需要在每次请求时，将之前的用户输入和模型输出都包含在 `payload.message.text` 列表中。

```python
import requests
import json

# 请替换为您的实际 API Key 和 App ID
API_KEY = "YOUR_API_KEY"
APP_ID = "YOUR_APP_ID"
API_URL = "https://spark-api-open.xf-yun.com/v2/chat/completions"

# 存储对话历史
conversation_history = []

def call_spark_chat_api(prompt, user_id="user_001"):
    """
    调用讯飞星火大模型 API，支持多轮对话。

    Args:
        prompt (str): 用户当前输入的文本。
        user_id (str): 用户 ID，用于保持对话上下文。

    Returns:
        dict: API 响应。
    """

    headers = {
        "Authorization": f"Bearer {API_KEY}",
        "Content-Type": "application/json"
    }

    # 将当前用户输入添加到历史记录
    conversation_history.append({"role": "user", "content": prompt})

    data = {
        "header": {
            "app_id": APP_ID,
            "uid": user_id
        },
        "payload": {
            "message": {
                "text": conversation_history
            }
        }
    }

    try:
        response = requests.post(API_URL, headers=headers, data=json.dumps(data))
        response.raise_for_status()
        response_json = response.json()

        # 将模型回复添加到历史记录
        if response_json and response_json.get("payload") and response_json["payload"].get("message") and response_json["payload"]["message"].get("text"):
            model_reply = response_json["payload"]["message"]["text"][0]
            conversation_history.append(model_reply)
        else:
             # 如果回复中没有文本，则不添加到历史记录
            if response_json and response_json.get("payload") and response_json["payload"].get("status"):
                status = response_json["payload"]["status"]
                print(f"\nAPI 返回错误:")
                print(f"  Code: {status.get('code')}")
                print(f"  Message: {status.get('message')}")
                print(f"  Request ID (SID): {status.get('sid')}")


        return response_json
    except requests.exceptions.RequestException as e:
        print(f"API 请求发生错误: {e}")
        return None

if __name__ == "__main__":
    print("开始与星火模型进行多轮对话（输入 '退出' 结束）：")

    while True:
        user_input = input("你: ")
        if user_input.lower() == "退出":
            break

        response_data = call_spark_chat_api(user_input)

        if response_data and response_data.get("payload") and response_data["payload"].get("message") and response_data["payload"]["message"].get("text"):
            assistant_reply = response_data["payload"]["message"]["text"][0]["content"]
            print(f"星火模型: {assistant_reply}")
        elif response_data and response_data.get("payload") and response_data["payload"].get("status"):
             # 错误信息已在函数内打印
             pass
        else:
            print("未能获取到有效的 API 响应。")

    print("\n对话结束。")
```